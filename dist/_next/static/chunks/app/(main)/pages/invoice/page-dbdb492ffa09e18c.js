(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6773],{2109:function(e,t,a){Promise.resolve().then(a.bind(a,3381))},3381:function(e,t,a){"use strict";a.r(t);var n=a(2122),s=a(23),l=a(7662),r=a(4527),o=a(8661),i=a(4418),c=a(2761),u=a(8690),d=a(8483),p=a(3495),m=a(2315),f=a(5588);t.default=()=>{let e={DOCUMENT_NUM:"",STATUS:"",OBJECT_NUM:"",DEPT_NAME:"",MATERIAL_NUM:"",OBJECT_NAME:"",BOOK_NAME:"",ID:"",TYPE:"",PLANER_NAME:""},[t,a]=(0,d.useState)({}),[v,h]=(0,d.useState)(!0),[y,b]=(0,d.useState)(e),[g,N]=(0,d.useState)([]),[j,S]=(0,d.useState)(""),[O,T]=(0,d.useState)(null),[x,E]=(0,d.useState)(!1),w=(0,d.useRef)(null),A=(0,u.useRouter)(),[M]=(0,d.useState)(["INSTOCK","LOWSTOCK","OUTOFSTOCK"]),P=async()=>{let e=localStorage.getItem("uid"),t=localStorage.getItem("sid"),a=await fetch("".concat(m.Z,"?uid=").concat(e,"&cmd=").concat("com.awspaas.user.apps.app20231017165850.queryFormList","&sid=").concat(t),{method:"POST"}),n=await a.json();console.log(n),h(!1),N(n)};(0,d.useEffect)(()=>{P(),I()},[]);let _=()=>{E(!1)},C=async()=>{let e=localStorage.getItem("sid"),t=O.ID,a=await fetch("".concat(m.Z,"?cmd=").concat("com.awspaas.user.apps.app20231017165850.removeForm","&sid=").concat(e,"&boid=").concat(t),{method:"POST"}),n=await a.json();console.log(n)},D=(0,n.jsxs)("div",{className:"space-x-4",children:[(0,n.jsx)(l.z,{type:"button",severity:"danger",icon:"pi pi-times",label:"否",outlined:!0,onClick:_}),(0,n.jsx)(l.z,{type:"button",severity:"success",icon:"pi pi-check",label:"是",outlined:!0,onClick:()=>{var t;let a=O.ID;N(g.filter(e=>e.ID!==a)),E(!1),b(e),null===(t=w.current)||void 0===t||t.show({severity:"success",summary:"成功",detail:"删除成功!",life:3e3}),T(null),C()}})]}),I=()=>{a({global:{value:null,matchMode:s.a6.CONTAINS},name:{operator:s.pg.AND,constraints:[{value:null,matchMode:s.a6.STARTS_WITH}]},"country.name":{operator:s.pg.AND,constraints:[{value:null,matchMode:s.a6.STARTS_WITH}]},representative:{value:null,matchMode:s.a6.IN},date:{operator:s.pg.AND,constraints:[{value:null,matchMode:s.a6.DATE_IS}]},balance:{operator:s.pg.AND,constraints:[{value:null,matchMode:s.a6.EQUALS}]},status:{operator:s.pg.OR,constraints:[{value:null,matchMode:s.a6.EQUALS}]},activity:{value:null,matchMode:s.a6.BETWEEN},verified:{value:null,matchMode:s.a6.EQUALS}}),S("")},U=e=>{switch(e){case"active":return"success";case"NOSTART":return"warning";case"terminate":return"danger";case"INSTOCK":return"info";default:return null}},k=(0,n.jsxs)("div",{className:"flex justify-content-between",children:[(0,n.jsxs)("div",{className:"space-x-2",children:[(0,n.jsx)(l.z,{className:"m-1",type:"button",severity:"success",icon:"pi pi-plus",label:"新增",outlined:!0,onClick:()=>{A.push("/pages/invoice/new/")}}),(0,n.jsx)(l.z,{className:"m-1",disabled:!O,type:"button",severity:"warning",icon:"pi pi-trash",label:"删除",outlined:!0,onClick:()=>{E(!0)}}),(0,n.jsx)(l.z,{className:"m-1",disabled:!O,type:"button",severity:"info",icon:"pi pi-file",label:"编辑",outlined:!0,onClick:()=>{console.log(O),A.push("/pages/invoice/".concat(null==O?void 0:O.ID))}}),(0,n.jsx)(l.z,{className:"m-1",disabled:!O,type:"button",severity:"help",icon:"pi pi-file-edit",label:"审批记录",outlined:!0,onClick:()=>{A.push("/pages/invoice/approve/".concat(null==O?void 0:O.ID))}})]}),(0,n.jsxs)("span",{className:"p-input-icon-left m-1",children:[(0,n.jsx)("i",{className:"pi pi-search"}),(0,n.jsx)(i.o,{value:j,onChange:e=>{let n=e.target.value,s={...t};s.global.value=n,a(s),S(n)},placeholder:"关键词筛选"})]})]});return(0,n.jsx)("div",{className:"grid",children:(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h5",{children:"项目费用单"}),(0,n.jsx)(c.F,{ref:w}),(0,n.jsxs)(o.w,{value:g,paginator:!0,className:"p-datatable-gridlines",showGridlines:!0,rows:10,rowsPerPageOptions:[5,10,25],dataKey:"ID",filters:t,filterDisplay:"menu",loading:v,responsiveLayout:"scroll",emptyMessage:"没有数据...",header:k,selection:O,onSelectionChange:e=>{T(e.value),console.log(e.value)},footer:"共 ".concat(g.length," 条"),children:[(0,n.jsx)(r.s,{selectionMode:"single",exportable:!1}),(0,n.jsx)(r.s,{sortable:!0,field:"TYPE",header:"费用记录类型",style:{width:"10rem",minWidth:"10rem"}}),(0,n.jsx)(r.s,{sortable:!0,field:"OBJECT_NUM",header:"对象号",style:{minWidth:"4rem"}}),(0,n.jsx)(r.s,{sortable:!0,field:"OBJECT_NAME",header:"对象描述",style:{minWidth:"4rem"}}),(0,n.jsx)(r.s,{sortable:!0,field:"DEPT_NAME",header:"所属部门",style:{minWidth:"4rem"}}),(0,n.jsx)(r.s,{sortable:!0,field:"BOOK_NAME",header:"书名",style:{minWidth:"4rem"}}),(0,n.jsx)(r.s,{sortable:!0,field:"MATERIAL_NUM",header:"物料号",style:{minWidth:"4rem"}}),(0,n.jsx)(r.s,{field:"STATUS",header:"状态",body:e=>(0,n.jsx)(f.V,{value:e.STATUS,severity:U(e.STATUS)}),style:{width:"10%"}})]})]}),(0,n.jsx)(p.V,{visible:x,style:{width:"32rem"},breakpoints:{"960px":"75vw","641px":"90vw"},header:"确认",modal:!0,footer:D,onHide:_,children:(0,n.jsx)("div",{className:"confirmation-content flex items-center",children:y&&(0,n.jsx)("span",{children:"确定要删除选中项吗?"})})})]})})}},2315:function(e,t){"use strict";t.Z="http://localhost:8088/portal/r/jd"},8690:function(e,t,a){e.exports=a(551)},5588:function(e,t,a){"use strict";a.d(t,{V:function(){return d}});var n=a(8483),s=a(2893),l=a(1872),r=a(23);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,a){var n;return n=function(e,t){if("object"!==o(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===o(n)?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=l.V.extend({defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0}});function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var d=n.forwardRef(function(e,t){var a,l=n.useContext(r.Ou),o=c.getProps(e,l),d=c.setMetaData({props:o}).ptm,p=n.useRef(null),m=(0,s.AK)("p-tag p-component",(i(a={},"p-tag-".concat(o.severity),null!==o.severity),i(a,"p-tag-rounded",o.rounded),a),o.className),f=(0,s.dG)({className:"p-tag-icon"},d("icon")),v=s.Cz.getJSXIcon(o.icon,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},f),{props:o});n.useImperativeHandle(t,function(){return{props:o,getElement:function(){return p.current}}});var h=(0,s.dG)({ref:p,className:m,style:o.style},c.getOtherProps(o),d("root")),y=(0,s.dG)({className:"p-tag-value"},d("value"));return n.createElement("span",h,v,n.createElement("span",y,o.value),n.createElement("span",null,o.children))});d.displayName="Tag"}},function(e){e.O(0,[2150,1013,1040,48,5129,2536,450,7882,3947,3156,2110,2786,2761,3495,6303,6106,1744],function(){return e(e.s=2109)}),_N_E=e.O()}]);